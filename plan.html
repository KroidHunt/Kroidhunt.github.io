<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Interview Prep – Mission Control</title>

<style>
:root {
  --bg:#020617;
  --card:rgba(15,23,42,.9);
  --border:rgba(148,163,184,.18);
  --text:#e5e7eb;
  --muted:#94a3b8;

  --frontend:#38bdf8;
  --js:#facc15;
  --system:#a78bfa;
  --perf:#34d399;
  --ai:#22c55e;
  --backend:#fb7185;
  --testing:#60a5fa;
  --boss:#f43f5e;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:ui-sans-serif,system-ui;
  background:radial-gradient(circle at top,#020617,#000);
  color:var(--text);
}

.container{
  max-width:540px;
  margin:auto;
  padding:16px 14px 120px;
}

h1{font-size:22px;margin-bottom:16px}

.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
  margin-bottom:16px;
}

.progress{
  height:10px;
  background:rgba(255,255,255,.12);
  border-radius:999px;
  overflow:hidden;
}

.progress-fill{
  height:100%;
  background:linear-gradient(90deg,#38bdf8,#818cf8);
  width:0%;
  transition:width .3s ease;
}

.mission{
  border:1px solid var(--border);
  border-radius:16px;
  padding:14px;
  margin-bottom:14px;
  background:rgba(255,255,255,.04);
}

.mission.completed{opacity:.55}

.mission-title{
  font-size:15px;
  font-weight:600;
}

.badge{
  font-size:10px;
  padding:2px 8px;
  border-radius:999px;
  margin-top:4px;
  display:inline-block;
}

.frontend{background:rgba(56,189,248,.25)}
.js{background:rgba(250,204,21,.25)}
.system{background:rgba(167,139,250,.25)}
.perf{background:rgba(52,211,153,.25)}
.ai{background:rgba(34,197,94,.25)}
.backend{background:rgba(251,113,133,.25)}
.testing{background:rgba(96,165,250,.25)}
.boss{background:rgba(244,63,94,.35)}

.subtasks{
  margin-top:10px;
  padding-left:4px;
}

.subtask{
  display:flex;
  gap:8px;
  font-size:13px;
  margin-bottom:6px;
  color:#cbd5f5;
}

.subtask input{margin-top:2px}

.actions{
  margin-top:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

button{
  border:1px solid var(--border);
  background:none;
  color:var(--text);
  padding:6px 12px;
  border-radius:999px;
  cursor:pointer;
}

button:disabled{opacity:.4;cursor:not-allowed}
</style>
</head>

<body>
<div class="container">

<h1>Interview Prep – Mission Control</h1>

<div class="card">
  <div style="display:flex;justify-content:space-between">
    <div>Level <strong id="level">1</strong></div>
    <div><strong id="xp">0</strong> XP</div>
  </div>
  <div class="progress" style="margin-top:8px">
    <div class="progress-fill" id="xpFill"></div>
  </div>
</div>

<div id="missions"></div>

</div>

<script>
const STORAGE="mission-subtasks-v1";

/* ===== MISSIONS WITH SUBTASKS ===== */
const missions=[
{
  id:"react-rerender",
  title:"Stop Unnecessary Re-renders",
  category:"frontend",
  xp:20,
  subtasks:[
    "Explain when React re-renders",
    "Explain state change vs parent render",
    "Explain referential equality",
    "Explain memo / useCallback trade-offs"
  ]
},
{
  id:"state-ownership",
  title:"State Ownership Mastery",
  category:"frontend",
  xp:20,
  subtasks:[
    "Identify shared vs local state",
    "Explain state colocation",
    "Explain lifting state up",
    "Give real project example"
  ]
},
{
  id:"event-loop",
  title:"Event Loop Clarity",
  category:"js",
  xp:15,
  subtasks:[
    "Explain call stack",
    "Explain microtasks",
    "Explain macrotasks",
    "Explain promise resolution order"
  ]
},
{
  id:"dashboard-design",
  title:"Design a 1M Row Dashboard",
  category:"system",
  xp:30,
  subtasks:[
    "Explain pagination vs virtualization",
    "Explain client vs server aggregation",
    "Explain caching strategy",
    "Explain performance trade-offs"
  ]
},
{
  id:"ai-usage",
  title:"AI Usage as a Senior Engineer",
  category:"ai",
  xp:20,
  subtasks:[
    "Explain how you use Copilot",
    "Explain how you review AI code",
    "Explain where you avoid AI",
    "Explain one AI failure"
  ]
},
{
  id:"boss-core",
  title:"BOSS: Core Frontend Readiness",
  category:"boss",
  xp:60,
  requires:["react-rerender","state-ownership","event-loop"],
  subtasks:[
    "Explain React internals confidently",
    "Explain JS execution without confusion",
    "Answer follow-up questions calmly"
  ]
}
];

const state=JSON.parse(localStorage.getItem(STORAGE))||{};

function save(){localStorage.setItem(STORAGE,JSON.stringify(state));}

function missionCompleted(m){
  return m.subtasks.every((_,i)=>state[`${m.id}-s${i}`]);
}

function canCompleteBoss(m){
  if(!m.requires) return true;
  return m.requires.every(id=>missionCompleted(missions.find(x=>x.id===id)));
}

function render(){
  const el=document.getElementById("missions");
  el.innerHTML="";
  let totalXP=0;

  missions.forEach(m=>{
    const done=missionCompleted(m);
    if(done) totalXP+=m.xp;

    const div=document.createElement("div");
    div.className="mission"+(done?" completed":"");

    let subs="";
    m.subtasks.forEach((s,i)=>{
      const key=`${m.id}-s${i}`;
      subs+=`
        <div class="subtask">
          <input type="checkbox" ${state[key]?"checked":""}/>
          <label>${s}</label>
        </div>`;
    });

    div.innerHTML=`
      <div class="mission-title">${m.title}</div>
      <span class="badge ${m.category}">${m.category.toUpperCase()}</span>
      <div class="subtasks">${subs}</div>
      <div class="actions">
        <span>+${m.xp} XP</span>
        <button ${done?"disabled":""}>
          ${done?"Completed":"Complete Mission"}
        </button>
      </div>
    `;

    div.querySelectorAll("input").forEach((cb,i)=>{
      cb.onchange=e=>{
        state[`${m.id}-s${i}`]=e.target.checked;
        save(); render();
      };
    });

    div.querySelector("button").onclick=()=>{
      if(m.category==="boss"&&!canCompleteBoss(m)){
        alert("Complete prerequisite missions first.");
        return;
      }
      m.subtasks.forEach((_,i)=>state[`${m.id}-s${i}`]=true);
      save(); render();
    };

    el.appendChild(div);
  });

  document.getElementById("xp").textContent=totalXP;
  document.getElementById("level").textContent=Math.floor(totalXP/50)+1;
  document.getElementById("xpFill").style.width=(totalXP%50)*2+"%";
}

render();
</script>
</body>
</html>
