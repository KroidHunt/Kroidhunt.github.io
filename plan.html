<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Interview Prep â€“ Mission Control</title>

<style>
:root {
  --bg:#020617;
  --card:rgba(15,23,42,.9);
  --border:rgba(148,163,184,.18);
  --text:#e5e7eb;
  --muted:#94a3b8;

  --frontend:#38bdf8;
  --js:#facc15;
  --system:#a78bfa;
  --perf:#34d399;
  --ai:#22c55e;
  --backend:#fb7185;
  --testing:#60a5fa;
  --boss:#f43f5e;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:ui-sans-serif,system-ui;
  background:radial-gradient(circle at top,#020617,#000);
  color:var(--text);
}

.container{
  max-width:560px;
  margin:auto;
  padding:16px 14px 120px;
}

h1{font-size:22px;margin-bottom:16px}

.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
  margin-bottom:16px;
}

.progress{
  height:10px;
  background:rgba(255,255,255,.12);
  border-radius:999px;
  overflow:hidden;
}

.progress-fill{
  height:100%;
  background:linear-gradient(90deg,#38bdf8,#818cf8);
  width:0%;
  transition:width .3s ease;
}

/* MISSIONS */
.mission{
  border:1px solid var(--border);
  border-radius:16px;
  padding:14px;
  margin-bottom:14px;
  background:rgba(255,255,255,.04);
}

.mission.completed{opacity:.55}

.mission-title{font-size:15px;font-weight:600}

.badge{
  font-size:10px;
  padding:2px 8px;
  border-radius:999px;
  display:inline-block;
  margin-top:4px;
}

.frontend{background:rgba(56,189,248,.25)}
.js{background:rgba(250,204,21,.25)}
.system{background:rgba(167,139,250,.25)}
.perf{background:rgba(52,211,153,.25)}
.ai{background:rgba(34,197,94,.25)}
.backend{background:rgba(251,113,133,.25)}
.testing{background:rgba(96,165,250,.25)}
.boss{background:rgba(244,63,94,.35)}

.subtasks{margin-top:10px}
.subtask{
  display:flex;
  gap:8px;
  font-size:13px;
  margin-bottom:6px;
}

.actions{
  margin-top:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

button{
  border:1px solid var(--border);
  background:none;
  color:var(--text);
  padding:6px 12px;
  border-radius:999px;
}

button:disabled{opacity:.4}

/* TROPHIES */
.trophy-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
}

.trophy{
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;
  background:rgba(255,255,255,.04);
  text-align:center;
  font-size:13px;
}

.trophy.locked{opacity:.35}
.trophy.unlocked{
  box-shadow:0 0 20px rgba(56,189,248,.4);
  animation:pop .4s ease;
}

@keyframes pop{
  from{transform:scale(.9)}
  to{transform:scale(1)}
}
</style>
</head>

<body>
<div class="container">

<h1>Interview Prep â€“ Mission Control</h1>

<!-- PROGRESS -->
<div class="card">
  <div style="display:flex;justify-content:space-between">
    <div>Level <strong id="level">1</strong></div>
    <div><strong id="xp">0</strong> XP</div>
  </div>
  <div class="progress" style="margin-top:8px">
    <div class="progress-fill" id="xpFill"></div>
  </div>
</div>

<!-- TROPHIES -->
<div class="card">
  <h3 style="margin:0 0 10px">Achievements</h3>
  <div class="trophy-grid" id="trophies"></div>
</div>

<!-- MISSIONS -->
<div id="missions"></div>

</div>

<script>
const STORAGE="mission-control-v2";

/* MISSIONS (sample subset â€“ expand freely) */
const missions=[
  {id:"rerender",title:"Stop Unnecessary Re-renders",category:"frontend",xp:20,subtasks:[
    "Explain re-render triggers","Explain referential equality","Explain memo trade-offs"
  ]},
  {id:"state",title:"State Ownership",category:"frontend",xp:20,subtasks:[
    "Colocation vs lifting","Global vs local state","Real example"
  ]},
  {id:"eventloop",title:"Event Loop Clarity",category:"js",xp:15,subtasks:[
    "Call stack","Microtasks","Macrotasks","Promise order"
  ]},
  {id:"ai",title:"AI Usage as Senior",category:"ai",xp:20,subtasks:[
    "Copilot usage","Review strategy","Failure examples"
  ]},
  {id:"boss",title:"FINAL BOSS: Interview Ready",category:"boss",xp:80,
    requires:["rerender","state","eventloop","ai"],
    subtasks:["Explain confidently","Handle follow-ups","No hesitation"]
  }
];

/* TROPHIES */
const trophiesDef=[
  {id:"first",icon:"ðŸ",label:"First Mission",check:s=>s.missions>=1},
  {id:"ten",icon:"ðŸ”¥",label:"10 Missions Done",check:s=>s.missions>=10},
  {id:"frontend",icon:"ðŸ§ ",label:"Frontend Core",check:s=>s.frontend>=2},
  {id:"ai",icon:"ðŸ¤–",label:"AI Ready",check:s=>s.ai>=1},
  {id:"final",icon:"ðŸ†",label:"Interview Ready",check:s=>s.boss}
];

const state=JSON.parse(localStorage.getItem(STORAGE))||{};
function save(){localStorage.setItem(STORAGE,JSON.stringify(state));}

function missionDone(m){
  return m.subtasks.every((_,i)=>state[`${m.id}-s${i}`]);
}

function canBoss(m){
  return !m.requires||m.requires.every(id=>{
    const mm=missions.find(x=>x.id===id);
    return missionDone(mm);
  });
}

function stats(){
  let s={missions:0,frontend:0,ai:0,boss:false};
  missions.forEach(m=>{
    if(missionDone(m)){
      s.missions++;
      if(m.category==="frontend") s.frontend++;
      if(m.category==="ai") s.ai++;
      if(m.category==="boss") s.boss=true;
    }
  });
  return s;
}

function render(){
  const mEl=document.getElementById("missions");
  mEl.innerHTML="";
  let xp=0;

  missions.forEach(m=>{
    const done=missionDone(m);
    if(done) xp+=m.xp;

    const div=document.createElement("div");
    div.className="mission"+(done?" completed":"");

    let subs="";
    m.subtasks.forEach((t,i)=>{
      const k=`${m.id}-s${i}`;
      subs+=`
        <div class="subtask">
          <input type="checkbox" ${state[k]?"checked":""}/>
          <label>${t}</label>
        </div>`;
    });

    div.innerHTML=`
      <div class="mission-title">${m.title}</div>
      <span class="badge ${m.category}">${m.category.toUpperCase()}</span>
      <div class="subtasks">${subs}</div>
      <div class="actions">
        <span>+${m.xp} XP</span>
        <button ${done?"disabled":""}>Complete Mission</button>
      </div>
    `;

    div.querySelectorAll("input").forEach((cb,i)=>{
      cb.onchange=e=>{
        state[`${m.id}-s${i}`]=e.target.checked;
        save(); render();
      };
    });

    div.querySelector("button").onclick=()=>{
      if(m.category==="boss"&&!canBoss(m)){
        alert("Complete prerequisites first");
        return;
      }
      m.subtasks.forEach((_,i)=>state[`${m.id}-s${i}`]=true);
      save(); render();
    };

    mEl.appendChild(div);
  });

  // XP + Level
  document.getElementById("xp").textContent=xp;
  document.getElementById("level").textContent=Math.floor(xp/50)+1;
  document.getElementById("xpFill").style.width=(xp%50)*2+"%";

  // TROPHIES
  const tEl=document.getElementById("trophies");
  tEl.innerHTML="";
  const s=stats();
  trophiesDef.forEach(t=>{
    const unlocked=t.check(s);
    const d=document.createElement("div");
    d.className="trophy "+(unlocked?"unlocked":"locked");
    d.textContent=`${t.icon} ${t.label}`;
    tEl.appendChild(d);
  });
}

render();
</script>
</body>
</html>
