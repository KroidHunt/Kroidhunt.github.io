<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Interview Prep Missions</title>

<style>
:root {
  --bg: #020617;
  --card: rgba(15,23,42,0.9);
  --border: rgba(148,163,184,0.18);
  --text: #e5e7eb;
  --muted: #94a3b8;

  --frontend: #38bdf8;
  --system: #a78bfa;
  --js: #facc15;
  --ai: #22c55e;
  --backend: #fb7185;
  --boss: #f43f5e;

  --radius: 18px;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: ui-sans-serif, system-ui;
  background: radial-gradient(circle at top, #020617, #000);
  color: var(--text);
}

.container {
  max-width: 480px;
  margin: auto;
  padding: 16px 14px 120px;
}

header {
  margin-bottom: 16px;
}

h1 {
  font-size: 22px;
  margin: 0;
}

/* CARDS */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
  margin-bottom: 16px;
  box-shadow: 0 25px 60px rgba(0,0,0,0.6);
}

/* PROGRESS */
.progress {
  height: 10px;
  background: rgba(255,255,255,0.12);
  border-radius: 999px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #38bdf8, #818cf8);
  width: 0%;
  transition: width 0.4s ease;
}

/* MISSIONS */
.mission {
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px;
  margin-bottom: 14px;
  background: rgba(255,255,255,0.04);
}

.mission.completed {
  opacity: 0.5;
}

.mission-title {
  font-weight: 600;
  font-size: 15px;
}

.badge {
  font-size: 10px;
  padding: 2px 8px;
  border-radius: 999px;
  display: inline-block;
  margin-top: 4px;
}

.frontend { background: rgba(56,189,248,0.2); }
.system { background: rgba(167,139,250,0.2); }
.js { background: rgba(250,204,21,0.2); }
.ai { background: rgba(34,197,94,0.2); }
.backend { background: rgba(251,113,133,0.2); }
.boss { background: rgba(244,63,94,0.25); }

.mission-body {
  font-size: 13px;
  margin-top: 8px;
  color: #cbd5f5;
}

.proof {
  font-size: 12px;
  margin-top: 6px;
  color: var(--muted);
  font-style: italic;
}

.actions {
  margin-top: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

button {
  background: none;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 6px 12px;
  color: var(--text);
  cursor: pointer;
}

button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}
</style>
</head>

<body>
<div class="container">

<header>
  <h1>Interview Prep Missions</h1>
</header>

<!-- PROGRESS CARD -->
<div class="card">
  <div style="display:flex;justify-content:space-between">
    <div>Level <strong id="level">1</strong></div>
    <div><strong id="xp">0</strong> XP</div>
  </div>
  <div class="progress" style="margin-top:8px">
    <div class="progress-fill" id="xpFill"></div>
  </div>
</div>

<div id="missions"></div>

</div>

<script>
const STORAGE = "mission-dashboard-v2";

/* FULL MISSION LIST */
const missions = [
  // FRONTEND CORE
  { id:"rerender", title:"Stop Unnecessary Re-renders", objective:"Explain why React components re-render.", proof:"Explain 3 causes + 2 fixes verbally.", xp:15, category:"frontend" },
  { id:"state", title:"Own State Placement", objective:"Decide where state should live.", proof:"Give 2 examples of colocation vs lifting.", xp:15, category:"frontend" },
  { id:"memo", title:"Memoization Discipline", objective:"Use memoization correctly.", proof:"Explain when useMemo hurts performance.", xp:15, category:"frontend" },
  { id:"forms", title:"Controlled vs Uncontrolled Inputs", objective:"Choose correct form strategy.", proof:"Explain trade-offs with examples.", xp:10, category:"frontend" },
  { id:"errors", title:"Error Boundaries Mastery", objective:"Handle UI failures gracefully.", proof:"Explain fallback UI + recovery.", xp:10, category:"frontend" },

  // JAVASCRIPT
  { id:"eventloop", title:"Event Loop Clarity", objective:"Explain async execution.", proof:"Explain microtasks vs macrotasks.", xp:15, category:"js" },
  { id:"closures", title:"Closure Confidence", objective:"Reason about closures.", proof:"Explain 2 real closure bugs.", xp:10, category:"js" },
  { id:"async", title:"Async Error Handling", objective:"Handle async failures.", proof:"Explain try/catch + promise chains.", xp:10, category:"js" },

  // SYSTEM DESIGN
  { id:"dashboard", title:"Design a 1M Row Dashboard", objective:"Design scalable UI.", proof:"Explain virtualization + pagination.", xp:25, category:"system" },
  { id:"caching", title:"Client Caching Strategy", objective:"Reduce unnecessary calls.", proof:"Explain cache invalidation.", xp:15, category:"system" },
  { id:"permissions", title:"Role-Based UI", objective:"Design permissions safely.", proof:"Explain frontend vs backend enforcement.", xp:15, category:"system" },

  // BACKEND AWARENESS
  { id:"pagination", title:"API Pagination Patterns", objective:"Consume APIs efficiently.", proof:"Explain cursor vs offset.", xp:10, category:"backend" },
  { id:"auth", title:"Auth Flow Awareness", objective:"Understand auth flows.", proof:"Explain JWT vs session.", xp:10, category:"backend" },

  // AI
  { id:"copilot", title:"AI-Assisted Development", objective:"Use AI responsibly.", proof:"Explain review strategy.", xp:15, category:"ai" },
  { id:"ai-limits", title:"AI Failure Awareness", objective:"Know AI limits.", proof:"Give 2 examples AI failed.", xp:10, category:"ai" },

  // INTERVIEW READINESS
  { id:"case", title:"10-Min Case Study", objective:"Explain one project clearly.", proof:"Deliver without rambling.", xp:20, category:"system" },
  { id:"behavioral", title:"Behavioral Clarity", objective:"Answer STAR questions.", proof:"Prepare 3 stories.", xp:15, category:"system" },

  // BOSS
  {
    id:"boss-core",
    title:"BOSS: Frontend & System Readiness",
    objective:"Prove interview readiness.",
    proof:"Explain frontend + system topics end-to-end.",
    xp:50,
    category:"boss",
    requires:[
      "rerender","state","memo","eventloop",
      "dashboard","permissions","case"
    ]
  }
];

const state = JSON.parse(localStorage.getItem(STORAGE)) || {};

function save() {
  localStorage.setItem(STORAGE, JSON.stringify(state));
}

function canComplete(m) {
  if (!m.requires) return true;
  return m.requires.every(id => state[id]);
}

function render() {
  const el = document.getElementById("missions");
  el.innerHTML = "";

  let totalXP = 0;

  missions.forEach(m => {
    if (state[m.id]) totalXP += m.xp;

    const div = document.createElement("div");
    div.className = "mission" + (state[m.id] ? " completed" : "");

    div.innerHTML = `
      <div class="mission-title">${m.title}</div>
      <span class="badge ${m.category}">${m.category.toUpperCase()}</span>
      <div class="mission-body">${m.objective}</div>
      <div class="proof">Proof: ${m.proof}</div>
      <div class="actions">
        <span>+${m.xp} XP</span>
        <button ${state[m.id] ? "disabled" : ""}>
          ${state[m.id] ? "Completed" : "Mark Complete"}
        </button>
      </div>
    `;

    div.querySelector("button").onclick = () => {
      if (!canComplete(m)) {
        alert("Complete prerequisite missions first.");
        return;
      }
      state[m.id] = true;
      save();
      render();
    };

    el.appendChild(div);
  });

  document.getElementById("xp").textContent = totalXP;
  document.getElementById("level").textContent = Math.floor(totalXP / 50) + 1;
  document.getElementById("xpFill").style.width = (totalXP % 50) * 2 + "%";
}

render();
</script>
</body>
</html>
