<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interview Prep Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #0b0b0c;
      --card: #111113;
      --border: #1f1f23;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #3b82f6;
      --success: #22c55e;
      --warning: #facc15;
    }

    [data-theme="light"] {
      --bg: #f9fafb;
      --card: #ffffff;
      --border: #e5e7eb;
      --text: #111827;
      --muted: #6b7280;
      --accent: #2563eb;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: ui-sans-serif, system-ui;
    }

    .container {
      max-width: 480px;
      margin: 0 auto;
      padding: 16px 14px 80px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    h1 {
      font-size: 20px;
      margin: 0;
    }

    button {
      background: none;
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: 10px;
      padding: 6px 10px;
      cursor: pointer;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      margin-bottom: 14px;
    }

    .muted {
      color: var(--muted);
      font-size: 13px;
    }

    .xp {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      margin-bottom: 8px;
    }

    .progress {
      height: 8px;
      background: #e5e7eb33;
      border-radius: 999px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: var(--accent);
      width: 0%;
      transition: width 0.3s ease;
    }

    .timeline {
      position: relative;
      padding-left: 20px;
    }

    .timeline::before {
      content: "";
      position: absolute;
      left: 6px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: var(--border);
    }

    .task {
      position: relative;
      padding: 12px 0 12px 12px;
    }

    .dot {
      position: absolute;
      left: -2px;
      top: 18px;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--border);
    }

    .task.completed .dot {
      background: var(--success);
    }

    .task.today .dot {
      background: var(--warning);
    }

    .task-header {
      display: flex;
      gap: 10px;
      align-items: flex-start;
    }

    .task input {
      margin-top: 4px;
      accent-color: var(--accent);
    }

    .task.completed label {
      text-decoration: line-through;
      color: var(--success);
    }

    .badge {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 999px;
      margin-left: 6px;
    }

    .past { background: #e5e7eb33; }
    .today { background: var(--warning); color: #000; }
    .future { background: #94a3b833; }
  </style>
</head>
<body>

<div class="container">
  <header>
    <h1>Interview Prep</h1>
    <button id="themeToggle">Toggle Theme</button>
  </header>

  <div class="card">
    <div class="xp">
      <div>Level <strong id="level">1</strong></div>
      <div><strong id="xp">0</strong> XP</div>
    </div>
    <div class="progress">
      <div class="progress-fill" id="xpBar"></div>
    </div>
    <div class="muted" style="margin-top:6px">
      10 XP per task Â· Level up every 100 XP
    </div>
  </div>

  <div class="card timeline" id="tasks"></div>
</div>

<script>
  const STORAGE = "frontend-dashboard-v3";
  const THEME_KEY = "frontend-theme";
  const startDate = new Date("2026-01-15");
  const XP_PER_TASK = 10;

  const tasksData = [
    "React re-render reasoning",
    "Memoization trade-offs",
    "Controlled vs uncontrolled",
    "Error boundaries",
    "JS event loop",
    "Closures",
    "Type-safe configs",
    "Resume first draft",
    "Large data dashboards",
    "Caching strategies",
    "Permissions UI",
    "Config-driven UI",
    "Performance trade-offs",
    "API pagination",
    "Auth flows",
    "Select case study",
    "Architecture explanation",
    "Trade-offs explanation",
    "Performance story",
    "AI usage story",
    "Finalize resume",
    "System design mock 1",
    "System design mock 2",
    "React/JS mock",
    "Behavioral mock",
    "Applications",
    "Referrals",
    "Company prep",
    "Offer evaluation",
    "Negotiation",
    "Final decision"
  ];

  const state = JSON.parse(localStorage.getItem(STORAGE)) || {};
  const today = new Date();

  function taskDate(i) {
    const d = new Date(startDate);
    d.setDate(d.getDate() + i);
    return d;
  }

  function status(date) {
    const diff = Math.floor((today - date) / 86400000);
    if (diff > 0) return ["Past", "past"];
    if (diff === 0) return ["Today", "today"];
    return ["Future", "future"];
  }

  function render() {
    const el = document.getElementById("tasks");
    el.innerHTML = "";

    let completed = 0;

    tasksData.forEach((text, i) => {
      const id = `t${i}`;
      const checked = !!state[id];
      if (checked) completed++;

      const date = taskDate(i);
      const [label, cls] = status(date);

      const task = document.createElement("div");
      task.className = `task ${checked ? "completed" : ""} ${cls === "today" ? "today" : ""}`;

      task.innerHTML = `
        <div class="dot"></div>
        <div class="task-header">
          <input type="checkbox" ${checked ? "checked" : ""} />
          <div>
            <label>${text}</label>
            <div class="muted">
              ${date.toDateString()}
              <span class="badge ${cls}">${label}</span>
            </div>
          </div>
        </div>
      `;

      task.querySelector("input").addEventListener("change", e => {
        state[id] = e.target.checked;
        localStorage.setItem(STORAGE, JSON.stringify(state));
        render();
      });

      el.appendChild(task);
    });

    const xp = completed * XP_PER_TASK;
    const level = Math.floor(xp / 100) + 1;
    const progress = (xp % 100);

    document.getElementById("xp").textContent = xp;
    document.getElementById("level").textContent = level;
    document.getElementById("xpBar").style.width = progress + "%";
  }

  // Theme
  const savedTheme = localStorage.getItem(THEME_KEY) || "dark";
  document.documentElement.dataset.theme = savedTheme;

  document.getElementById("themeToggle").onclick = () => {
    const next = document.documentElement.dataset.theme === "dark" ? "light" : "dark";
    document.documentElement.dataset.theme = next;
    localStorage.setItem(THEME_KEY, next);
  };

  render();
</script>

</body>
</html>
